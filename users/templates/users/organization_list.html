{% extends 'users/staff_dashboard.html' %}
{% load custom_filters %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center" style="color: #5f52aa;">Organization List</h2>
    <br>
    

    <!-- Responsive Table Section -->
    <div class="table-responsive">
        <table class="table table-striped table-bordered shadow-sm">
            <thead style="background-color: #5f52aa; color: white;">
                <tr>
                    <th style=" font-weight: bold;" scope="col">Organization Name</th>
                    <th  style=" font-weight: bold;"scope="col">Email</th>
                    <th style=" font-weight: bold;" scope="col" class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for organization in organizations %}
                <tr>
                    <td style=" font-weight: bold;">{{ organization.organization_name }}</td>
                    <td style=" font-weight: bold;">{{ organization.organization_email }}</td>
                    <td style=" font-weight: bold;">
                        <div class="d-flex justify-content-center">
                            <div class="btn-group">
                                <a href="{% url 'asanas_view' organization.id %}"  class="btn btn-primary btn-custom-small me-2 btn-spacing">
                                    <i class="fas fa-eye"></i> View Details
                                </a>
                                <a href="{% url 'send_email_view' organization.id %}" id="send_email_form" class="btn btn-secondary btn-custom-small me-2 btn-spacing">
                                    <i class="fas fa-envelope"></i> Send Email
                                </a>
                                
                            </div>
                            <!-- Enable/Disable Form -->
                            <div class="btn-group mt-2 ms-2"> <!-- Add margin start (left) for spacing -->
                                <!-- Enable Form -->
                                <form id="enable-form-{{ organization.id }}" method="POST" style="display:inline;">
                                    {% csrf_token %}
                                    <input type="hidden" name="tenant_id" value="{{ organization.id }}">
                                    <input type="hidden" name="action" value="enable">
                                    {% if not organization.is_active %}
                                        <button type="submit" class="btn btn-success btn-custom-small" style="padding: 10px 16px; font-size: 1rem;">Enable</button>
                                    {% endif %}
                                </form>
                        
                                <!-- Disable Form -->
                                <form id="disable-form-{{ organization.id }}" method="POST" style="display:inline;">
                                    {% csrf_token %}
                                    <input type="hidden" name="tenant_id" value="{{ organization.id }}">
                                    <input type="hidden" name="action" value="disable">
                                    {% if organization.is_active %}
                                        <button type="submit" class="btn btn-danger btn-custom-small" style="padding: 10px 16px; font-size: 1rem;">Disable</button>
                                    {% endif %}
                                </form>
                            </div>
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" class="text-center">No organizations available.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Back Button -->
   
</div>

<script>
    
        function submit_form() {
        $("#send_email_form").submit();

    }

</script>
<style>
    /* Custom Button Size */
    .btn-custom-small {
        padding: 10px 16px;  /* Adjust padding */
        font-size: 1rem; /* Increased font size */
    }

    .btn-spacing {
        margin-right: 0.5rem; /* Adjust the value for desired spacing */
    }

    /* Optional: Increase overall visibility */
    .btn-primary,
    .btn-secondary,
    .btn-success,
    .btn-danger {
        border-radius: 5px;  /* Slightly rounded corners */
        font-weight: bold;    /* Bold text for better visibility */
    }
</style>

{% endblock %}

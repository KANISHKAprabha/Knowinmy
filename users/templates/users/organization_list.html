{% extends 'users/staff_dashboard.html' %}

{% block content %}
<div class="container">
    <h2 class="text-center mt-4">Organization List</h2>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Organization Name</th>
                    <th>Email</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for organization in organizations %}
                <tr>
                    <td>{{ organization.organization_name }}</td>
                    <td>{{ organization.organization_email }}</td>
                    <td>
                        <div class="btn-group">
                            <a href="{% url 'asanas_view' organization.id %}" class="btn btn-primary">
                                <i class="fas fa-eye"></i> View Details
                            </a>
                            <a href="{% url 'send_email_view' organization.id %}" class="btn btn-secondary">
                                <i class="fas fa-envelope"></i> Send Email
                            </a>
                            <a href="{% url 'create_coupon_view' organization.id %}" class="btn btn-success">
                                <i class="fas fa-tag"></i> Create Coupon
                            </a>
                        </div>
                        <!-- Enable/Disable Form -->
                        <div class="btn-group mt-2">
                            <div class="d-flex justify-content-center">
                                <!-- Enable Form -->
                                <form id="enable-form-{{ organization.id }}" method="POST" style="display:inline;">
                                    {% csrf_token %}
                                    <input type="hidden" name="tenant_id" value="{{ organization.id }}">
                                    <input type="hidden" name="action" value="enable">
                                    {% if not organization.is_active %}
                                        <button type="submit" class="btn btn-success btn-sm">Enable</button>
                                    {% endif %}
                                </form>
                            
                                <!-- Disable Form -->
                                <form id="disable-form-{{ organization.id }}" method="POST" style="display:inline;">
                                    {% csrf_token %}
                                    {{ organization.id }}
                                    {{organization.is_active}}
                                    <input type="hidden" name="tenant_id" value="{{ organization.id }}">
                                    <input type="hidden" name="action" value="disable">
                                    {% if organization.is_active %}
                                        <button type="submit" class="btn btn-danger btn-sm">Disable</button>
                                    {% endif %}
                                </form>
                            </div>
                            
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}
